<h1>Tasks</h1>

<% if @urgents.count >= 1%>
<div class="alert alert-danger alert-dismissible fade show" role="alert">
  <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
  You have <strong><%= @today.count%></strong> <%= @today.count > 1 ? "tasks" : "task"%> due <%= link_to "today", tasks_urgent_list_url%> and <%= @over.count%></strong> overdue <%= @over.count > 1 ? "tasks" : "task"%> that needs <%= link_to "attention.", tasks_overdue_list_url%>
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
<%end%>

<%= link_to 'New Task', new_task_path, class: "btn btn-outline-primary float-end mb-2" %>

<div class="table-box">
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Task name</th>
        <th>Task details</th>
        <th>Date</th>
        <th>Category</th>
        <th>Status</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody class="table-group-divider">
      <% @tasks.each do |task| %>
        <tr>
          <td><%= task.task_name %></td>
          <td><%= task.task_details %></td>
          <td><%= task.date %></td>
          <td><%= task.category.category_title %></td>
          <td><%= task.completed_status === true ? "Completed" : "Pending" %></td>
          <td class="align-center">
            <%= link_to ' Show', task, class:"btn btn-info bi-eye-fill space" %>
            <%= link_to ' Edit', edit_task_path(task), class:"btn btn-success bi-pencil-fill space" %>
            <%= link_to ' Destroy', task, method: :delete, data: { confirm: 'Are you sure?' }, class:"btn btn-danger bi-trash-fill space" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>


<br>
